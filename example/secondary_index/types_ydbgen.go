// Code generated by ydbgen; DO NOT EDIT.

package main

import (
	"strconv"

	"github.com/yandex-cloud/ydb-go-sdk"
	"github.com/yandex-cloud/ydb-go-sdk/table"
)

var (
	_ = strconv.Itoa
	_ = ydb.StringValue
	_ = table.NewQueryParameters
)

func (u *User) StructValue() ydb.Value {
	var v0 ydb.Value
	{
		var v1 ydb.Value
		{
			vp0 := ydb.Uint64Value(u.ID)
			v1 = ydb.OptionalValue(vp0)
		}
		var v2 ydb.Value
		{
			vp0 := ydb.UTF8Value(u.Name)
			v2 = ydb.OptionalValue(vp0)
		}
		var v3 ydb.Value
		{
			vp0 := ydb.Uint32Value(u.Age)
			v3 = ydb.OptionalValue(vp0)
		}
		v0 = ydb.StructValue(
			ydb.StructFieldValue("user_id", v1),
			ydb.StructFieldValue("name", v2),
			ydb.StructFieldValue("age", v3),
		)
	}
	return v0
}

func (s *Series) Scan(res *table.Result) (err error) {
	res.NextItem()
	s.ID = res.OUint64()

	res.NextItem()
	s.Title = res.OUTF8()

	res.NextItem()
	s.Info = res.OUTF8()

	res.NextItem()
	res.Unwrap()
	if !res.IsNull() {
		x0 := res.Datetime()
		err := (*ydb.Time)(&s.ReleaseDate).FromDatetime(x0)
		if err != nil {
			panic("ydbgen: date type conversion failed: " + err.Error())
		}
	}

	res.NextItem()
	s.Views = res.OUint64()

	res.NextItem()
	s.UploadedUserID = res.OUint64()

	return res.Err()
}

func (s *Series) StructValue() ydb.Value {
	var v0 ydb.Value
	{
		var v1 ydb.Value
		{
			vp0 := ydb.Uint64Value(s.ID)
			v1 = ydb.OptionalValue(vp0)
		}
		var v2 ydb.Value
		{
			vp0 := ydb.UTF8Value(s.Title)
			v2 = ydb.OptionalValue(vp0)
		}
		var v3 ydb.Value
		{
			vp0 := ydb.UTF8Value(s.Info)
			v3 = ydb.OptionalValue(vp0)
		}
		var v4 ydb.Value
		{
			var x0 uint32
			ok0 := !s.ReleaseDate.IsZero()
			if ok0 {
				x0 = ydb.Time(s.ReleaseDate).Datetime()
			}
			if ok0 {
				v4 = ydb.OptionalValue(ydb.DatetimeValue(x0))
			} else {
				v4 = ydb.NullValue(ydb.TypeDatetime)
			}
		}
		var v5 ydb.Value
		{
			vp0 := ydb.Uint64Value(s.Views)
			v5 = ydb.OptionalValue(vp0)
		}
		var v6 ydb.Value
		{
			vp0 := ydb.Uint64Value(s.UploadedUserID)
			v6 = ydb.OptionalValue(vp0)
		}
		v0 = ydb.StructValue(
			ydb.StructFieldValue("series_id", v1),
			ydb.StructFieldValue("title", v2),
			ydb.StructFieldValue("info", v3),
			ydb.StructFieldValue("release_date", v4),
			ydb.StructFieldValue("views", v5),
			ydb.StructFieldValue("uploaded_user_id", v6),
		)
	}
	return v0
}

func (us UsersList) ListValue() ydb.Value {
	var list0 ydb.Value
	vs0 := make([]ydb.Value, len(us))
	for i0, item0 := range us {
		var v0 ydb.Value
		{
			var v1 ydb.Value
			{
				vp0 := ydb.Uint64Value(item0.ID)
				v1 = ydb.OptionalValue(vp0)
			}
			var v2 ydb.Value
			{
				vp0 := ydb.UTF8Value(item0.Name)
				v2 = ydb.OptionalValue(vp0)
			}
			var v3 ydb.Value
			{
				vp0 := ydb.Uint32Value(item0.Age)
				v3 = ydb.OptionalValue(vp0)
			}
			v0 = ydb.StructValue(
				ydb.StructFieldValue("user_id", v1),
				ydb.StructFieldValue("name", v2),
				ydb.StructFieldValue("age", v3),
			)
		}
		vs0[i0] = v0
	}
	if len(vs0) == 0 {
		var t1 ydb.Type
		{
			fs0 := make([]ydb.StructOption, 3)
			var t2 ydb.Type
			{
				tp0 := ydb.TypeUint64
				t2 = ydb.Optional(tp0)
			}
			fs0[0] = ydb.StructField("user_id", t2)
			var t3 ydb.Type
			{
				tp0 := ydb.TypeUTF8
				t3 = ydb.Optional(tp0)
			}
			fs0[1] = ydb.StructField("name", t3)
			var t4 ydb.Type
			{
				tp0 := ydb.TypeUint32
				t4 = ydb.Optional(tp0)
			}
			fs0[2] = ydb.StructField("age", t4)
			t1 = ydb.Struct(fs0...)
		}
		t0 := ydb.List(t1)
		list0 = ydb.ZeroValue(t0)
	} else {
		list0 = ydb.ListValue(vs0...)
	}
	return list0
}

func (ss *SeriesList) Scan(res *table.Result) (err error) {
	for res.NextRow() {
		var x0 Series

		res.NextItem()
		x0.ID = res.OUint64()

		res.NextItem()
		x0.Title = res.OUTF8()

		res.NextItem()
		x0.Info = res.OUTF8()

		res.NextItem()
		res.Unwrap()
		if !res.IsNull() {
			x1 := res.Datetime()
			err := (*ydb.Time)(&x0.ReleaseDate).FromDatetime(x1)
			if err != nil {
				panic("ydbgen: date type conversion failed: " + err.Error())
			}
		}

		res.NextItem()
		x0.Views = res.OUint64()

		res.NextItem()
		x0.UploadedUserID = res.OUint64()

		if res.Err() == nil {
			*ss = append(*ss, x0)
		}
	}
	return res.Err()
}

func (ss SeriesList) ListValue() ydb.Value {
	var list0 ydb.Value
	vs0 := make([]ydb.Value, len(ss))
	for i0, item0 := range ss {
		var v0 ydb.Value
		{
			var v1 ydb.Value
			{
				vp0 := ydb.Uint64Value(item0.ID)
				v1 = ydb.OptionalValue(vp0)
			}
			var v2 ydb.Value
			{
				vp0 := ydb.UTF8Value(item0.Title)
				v2 = ydb.OptionalValue(vp0)
			}
			var v3 ydb.Value
			{
				vp0 := ydb.UTF8Value(item0.Info)
				v3 = ydb.OptionalValue(vp0)
			}
			var v4 ydb.Value
			{
				var x0 uint32
				ok0 := !item0.ReleaseDate.IsZero()
				if ok0 {
					x0 = ydb.Time(item0.ReleaseDate).Datetime()
				}
				if ok0 {
					v4 = ydb.OptionalValue(ydb.DatetimeValue(x0))
				} else {
					v4 = ydb.NullValue(ydb.TypeDatetime)
				}
			}
			var v5 ydb.Value
			{
				vp0 := ydb.Uint64Value(item0.Views)
				v5 = ydb.OptionalValue(vp0)
			}
			var v6 ydb.Value
			{
				vp0 := ydb.Uint64Value(item0.UploadedUserID)
				v6 = ydb.OptionalValue(vp0)
			}
			v0 = ydb.StructValue(
				ydb.StructFieldValue("series_id", v1),
				ydb.StructFieldValue("title", v2),
				ydb.StructFieldValue("info", v3),
				ydb.StructFieldValue("release_date", v4),
				ydb.StructFieldValue("views", v5),
				ydb.StructFieldValue("uploaded_user_id", v6),
			)
		}
		vs0[i0] = v0
	}
	if len(vs0) == 0 {
		var t1 ydb.Type
		{
			fs0 := make([]ydb.StructOption, 6)
			var t2 ydb.Type
			{
				tp0 := ydb.TypeUint64
				t2 = ydb.Optional(tp0)
			}
			fs0[0] = ydb.StructField("series_id", t2)
			var t3 ydb.Type
			{
				tp0 := ydb.TypeUTF8
				t3 = ydb.Optional(tp0)
			}
			fs0[1] = ydb.StructField("title", t3)
			var t4 ydb.Type
			{
				tp0 := ydb.TypeUTF8
				t4 = ydb.Optional(tp0)
			}
			fs0[2] = ydb.StructField("info", t4)
			var t5 ydb.Type
			{
				tp0 := ydb.TypeDatetime
				t5 = ydb.Optional(tp0)
			}
			fs0[3] = ydb.StructField("release_date", t5)
			var t6 ydb.Type
			{
				tp0 := ydb.TypeUint64
				t6 = ydb.Optional(tp0)
			}
			fs0[4] = ydb.StructField("views", t6)
			var t7 ydb.Type
			{
				tp0 := ydb.TypeUint64
				t7 = ydb.Optional(tp0)
			}
			fs0[5] = ydb.StructField("uploaded_user_id", t7)
			t1 = ydb.Struct(fs0...)
		}
		t0 := ydb.List(t1)
		list0 = ydb.ZeroValue(t0)
	} else {
		list0 = ydb.ListValue(vs0...)
	}
	return list0
}

